# تعليمات تطبيق النظام الجديد - صالة حسام جم

## خطوات التطبيق

### 1. إعداد قاعدة البيانات الجديدة

**مهم:** سيتم حذف جميع الجداول القديمة وإنشاء جداول جديدة. تأكد من عمل نسخة احتياطية إذا كنت تريد الاحتفاظ بالبيانات القديمة.

1. انتقل إلى لوحة تحكم Supabase الخاصة بك
2. اذهب إلى قسم "SQL Editor"
3. انسخ والصق محتوى الملف `gym-management-new-schema.sql`
4. اضغط "Run" لتنفيذ الاستعلام

### 2. تحديث إعدادات Supabase

تأكد من أن إعدادات Supabase في الملف `src/lib/supabase.ts` تحتوي على:

- الرابط الصحيح لمشروعك
- مفتاح API الصحيح

### 3. رمز الدخول للصالة

الرمز الافتراضي للدخول هو: **112233**

يمكنك تغيير هذا الرمز في الملف `src/lib/auth-new.ts` في المتغير `GYM_ACCESS_CODE`

### 4. اسم الصالة

اسم الصالة الافتراضي هو: **صالة حسام جم**

يمكنك تغيير هذا الاسم في الملف `src/lib/auth-new.ts` في المتغير `GYM_NAME`

## الميزات الجديدة

### 1. صفحة المشتركين

- عرض جميع المشتركين في بطاقات أنيقة
- البحث في الأسماء وأرقام الهواتف
- عرض التفاصيل الكاملة في نافذة منبثقة
- أزرار للحذف والطباعة

### 2. صفحة إضافة مشترك

- تصميم ثلاثة أعمدة:
  - العمود الأيمن: المعلومات الأساسية
  - العمود الأوسط: مجموعات الكورسات
  - العمود الأيسر: مجموعات الأنظمة الغذائية
- إمكانية إضافة مجموعات متعددة لكل مشترك
- اختيار التمارين والأطعمة من المكتبة المتاحة

### 3. صفحة إدارة التمارين

- إضافة وتعديل وحذف التمارين
- البحث في التمارين
- وصف لكل تمرين

### 4. صفحة إدارة الأنظمة الغذائية

- إضافة وتعديل وحذف العناصر الغذائية
- البحث في الأطعمة
- وصف لكل عنصر غذائي

### 5. نظام المصادقة البسيط

- دخول برمز سري واحد
- عرض مدة الجلسة
- تسجيل خروج آمن

### 6. النسخ الاحتياطي والطباعة

- تحميل نسخة احتياطية بصيغة JSON
- طباعة بطاقات المشتركين
- طباعة أي صفحة في النظام

## هيكل قاعدة البيانات الجديدة

### الجداول الأساسية:

1. **subscribers** - المشتركين

   - المعلومات الأساسية: الاسم، العمر، الوزن، الطول، الهاتف، الملاحظات

2. **groups** - مجموعات الكورسات والأنظمة الغذائية

   - مرتبطة بالمشتركين
   - نوع المجموعة (كورس أو غذاء)
   - عنوان اختياري للمجموعة

3. **group_items** - عناصر كل مجموعة

   - النقاط داخل كل مجموعة
   - مرتبة حسب الأولوية

4. **course_points** - مكتبة التمارين

   - جميع التمارين المتاحة للاختيار

5. **diet_items** - مكتبة الأطعمة
   - جميع العناصر الغذائية المتاحة

## استخدام النظام

### إضافة مشترك جديد:

1. اذهب إلى "إضافة مشترك"
2. املأ المعلومات الأساسية
3. أضف مجموعات الكورسات (اختياري)
4. أضف مجموعات الأنظمة الغذائية (اختياري)
5. اضغط "حفظ كل البيانات"

### إدارة التمارين:

1. اذهب إلى "إدارة التمارين"
2. أضف التمارين التي تحتاجها
3. يمكن تعديلها أو حذفها لاحقاً

### إدارة الأنظمة الغذائية:

1. اذهب إلى "إدارة الأنظمة الغذائية"
2. أضف الأطعمة والمكملات الغذائية
3. يمكن تعديلها أو حذفها لاحقاً

### عرض تفاصيل مشترك:

1. اذهب إلى صفحة "المشتركين"
2. اضغط "عرض التفاصيل" على أي مشترك
3. ستظهر جميع المعلومات والمجموعات

### طباعة بطاقة مشترك:

1. اضغط زر الطباعة في تفاصيل المشترك
2. أو استخدم "طباعة الصفحة" من القائمة الجانبية

## الدعم الفني

إذا واجهتك أي مشكلة، تأكد من:

1. صحة اتصال قاعدة البيانات
2. تشغيل جميع الاستعلامات المطلوبة
3. وجود البيانات الأساسية (التمارين والأطعمة)

النظام مصمم ليكون بسيط وفعال لإدارة صالة الرياضة بأفضل طريقة ممكنة.
